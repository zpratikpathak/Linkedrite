{% load static %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LinkedIn AI Rewrite</title>
    <link rel="icon" href="{% static './favicon.ico' %}" />

    <link rel="stylesheet" href="{% static './rewrite/style.css' %}" />
  </head>
  <body>
    <div class="post-box">
      <div class="header">
        <img
          src="{% static './rewrite/profile.png'%}"
          alt="Profile Picture"
          class="profile-pic"
        />
        <span class="name">LinkedIn Rewrite</span>
        <span class="privacy">Post to Anyone</span>
      </div>
      <div class="input-area">
        <textarea
          placeholder="What do you want to talk about?"
          id="postInput"
          name="postInput"
        ></textarea>
        <div class="actions">
          <div class="actionButton">
            <div class="checkbox-con">
              <input id="emojiNeeded" type="checkbox" checked />ğŸ˜€
            </div>
            <!-- <button id="emoji-btn">ğŸ˜€</button> -->
          </div>
          <div class="actionButton">
            <button
              id="robot-btn"
              onclick="window.open('https://github.com/zpratikpathak')"
            >
              &#128420;
            </button>
            <button id="add-btn">#</button>
            <!-- <button id="post-btn" disabled>Post</button> -->
            <button id="doc-btn" onclick="copyText()">
              Copy&nbsp;
              <span class="svgIcon"></span>
              <svg
                fill="black"
                viewBox="0 0 384 512"
                height="1em"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M280 64h40c35.3 0 64 28.7 64 64V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V128C0 92.7 28.7 64 64 64h40 9.6C121 27.5 153.3 0 192 0s71 27.5 78.4 64H280zM64 112c-8.8 0-16 7.2-16 16V448c0 8.8 7.2 16 16 16H320c8.8 0 16-7.2 16-16V128c0-8.8-7.2-16-16-16H304v24c0 13.3-10.7 24-24 24H192 104c-13.3 0-24-10.7-24-24V112H64zm128-8a24 24 0 1 0 0-48 24 24 0 1 0 0 48z"
                ></path>
              </svg>
            </button>
            <button id="rewrite-btn" class="rewrite-btn" type="submit">
              <span id="button-text">Rewrite with AIâœ¨</span>
              <div id="spinner" style="display: none"></div>
            </button>
          </div>
        </div>
      </div>
    </div>
      
    <div class="blog-content">
      <div class="blog-header">
        <h1>LinkedIn AI Rewrite: Your LinkedIn Post Generator ğŸš€</h1>
        <p>Generate professional LinkedIn posts with AI ğŸ¤–</p>
      </div>
      
      <section>
        <p>
          Want to increase your LinkedIn engagement? LinkedIn AI Rewrite, your LinkedIn Post Generator, can help you generate professional posts with the help of AI. Simply enter your initial post input, and let the AI rewrite it in a more professional and engaging manner. Enhance your LinkedIn presence with LinkedIn AI Rewrite today! ğŸ‰
        </p>
      </section>
    
      <section>
        <h2>About the Project ğŸ“–</h2>
        <p>
          LinkedIn AI Rewrite is a project aimed at helping LinkedIn users generate professional posts with the help of AI. It takes your initial post input and rewrites it in a more professional and engaging manner, enhancing your LinkedIn presence. It's your go-to LinkedIn Post Generator.
        </p>
      </section>
    
      <section>
        <h2>What is LinkedIn? ğŸŒ</h2>
        <p>
          LinkedIn is a professional networking platform that allows users to connect with other professionals, share updates, and build their personal brand. It is widely used by professionals across various industries to network, find job opportunities, and share insights.
        </p>
      </section>
    
      <section>
        <h2>Why Use LinkedIn AI Rewrite? ğŸ¤”</h2>
        <p>
          LinkedIn AI Rewrite, your LinkedIn Post Generator, offers several benefits to users, including:
          <ol>
            <li>Generate professional LinkedIn posts with AI ğŸ¤–</li>
            <li>Enhance your LinkedIn presence ğŸš€</li>
            <li>Improve your engagement on LinkedIn ğŸ‘¥</li>
            <!-- Add more benefits as necessary -->
          </ol>
        </p>
      </section>
    
      <section>
        <h2>How to Install ğŸ› ï¸</h2>
        <p>
          You can install LinkedIn AI Rewrite, your LinkedIn Post Generator, by following these steps:
          <ol>
            <li>Step 1: Description of step 1</li>
            <li>Step 2: Description of step 2</li>
            <li>Step 3: Description of step 3</li>
            <!-- Add more steps as necessary -->
          </ol>
        </p>
      </section>
    
      <section>
        <h2>How It Works ğŸ§ </h2>
        <p>
          LinkedIn AI Rewrite, your LinkedIn Post Generator, works by leveraging advanced AI algorithms to rewrite your LinkedIn posts. Here's a brief overview of how it works:
          <ol>
            <li>It uses GPT4 to analyse your post ğŸ“</li>
            <li>After analysing, it finds common mistakes and improves them âœ…</li>
            <li>It analyses your post to make it more interesting and engaging ğŸ‰</li>
            <!-- Add more steps as necessary -->
          </ol>
        </p>
      </section>
    
      <!-- Add more sections as necessary -->
    </div>
  </body>

  <script>
    function writeText(text, placeholder = false, callback = null) {
      const responseAI = text;
      const postInput = document.getElementById("postInput");
      let i = 0;
      if (placeholder) {
        postInput.value = ""; // Clear the input box
      }
      const typingEffect = setInterval(() => {
        const currentText = responseAI.slice(0, i);
        if (placeholder) {
          postInput.placeholder = currentText;
        } else {
          postInput.value = currentText;
          adjustHeight(); // Adjust the height after changing the value
        }
        i++;
        if (i > responseAI.length) {
          clearInterval(typingEffect);
          console.log("writeText completed");
          if (callback) {
            callback();
          }
        }
      }, 30);
    }

    function sendData() {
      var postInput = document.getElementById("postInput").value;
      var emojiNeeded = document.getElementById("emojiNeeded").checked;
      var rewriteBtn = document.getElementById("rewrite-btn");
      var spinner = document.getElementById("spinner");
      var buttonText = document.getElementById("button-text");
    
      const data = {
        postInput: postInput,
        emojiNeeded: emojiNeeded,
        htagNeeded: true,
      };
    
      if (postInput.length < 10) {
        const responseAI = "Please write more to generate a professional response";
        writeText(responseAI, true);
        return;
      }
    
      rewriteBtn.disabled = true;
      spinner.style.display = "inline-block";
      buttonText.style.display = "none";
    
      fetch("{% url 'rewrite' %}", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          // "X-CSRFToken": "{{ csrf_token }}",
        },
        body: JSON.stringify(data),
      })
        .then((response) => {
          if (!response.ok) {
            if (response.status === 429) {
              throw new Error("Too Many Requests");
            } else {
              throw new Error("An error occurred");
            }
          }
          return response.json();
        })
        .then((data) => {
          if (!data || !data.rewriteAI) {
            showToast("An error occurred");
            return;
          }
    
          console.log("Success:", data.success);
          console.log("Message:", data.rewriteAI);
          console.log("data:", data);
    
          const responseAI = data.rewriteAI;
          writeText(responseAI, false, function () {
            rewriteBtn.disabled = false;
            spinner.style.display = "none";
            buttonText.style.display = "inline-block";
          });
        })
        .catch((error) => {
          console.error(error);
          showToast(error.message);
    
          rewriteBtn.disabled = false;
          spinner.style.display = "none";
          buttonText.style.display = "inline-block";
        });
    }
    
    const rewriteBtn = document.getElementById("rewrite-btn");
    rewriteBtn.addEventListener("click", sendData);
  </script>
  <script src="{% static './rewrite/script.js'%}"></script>
</html>
